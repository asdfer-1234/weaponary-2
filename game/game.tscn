[gd_scene load_steps=18 format=3 uid="uid://1vgpa5pxmxpa"]

[ext_resource type="Script" path="res://game/turret/turret_selection.gd" id="2_6iqjx"]
[ext_resource type="Theme" uid="uid://vxs3lu15fk42" path="res://ui/Theme.tres" id="3"]
[ext_resource type="Shader" path="res://graphics/outline.gdshader" id="3_5rhxv"]
[ext_resource type="PackedScene" path="res://physics_timer.tscn" id="5"]
[ext_resource type="Script" path="res://game/turret/turret_target_indicator.gd" id="5_svi0v"]
[ext_resource type="Script" path="res://game/turret/builder/Builder.gd" id="6"]
[ext_resource type="Script" path="res://game/map.gd" id="6_q555l"]
[ext_resource type="Script" path="res://game/turret/builder/CursorFollower.gd" id="7"]
[ext_resource type="PackedScene" uid="uid://yyqx4oqr57fu" path="res://game/stone/big_stone.tscn" id="7_1d3fw"]
[ext_resource type="TileSet" uid="uid://bg6062i6bjqli" path="res://game/map/map_tile_set.tres" id="8_i48p8"]
[ext_resource type="Texture2D" uid="uid://cydt7u8g1lbd5" path="res://game/turret/target_indicator.png" id="10"]
[ext_resource type="Resource" uid="uid://crla8kwtjyy6d" path="res://game/turret/weapon/cannon/cannon.tres" id="10_c40m7"]
[ext_resource type="Resource" uid="uid://dryxo6wwm7x6d" path="res://game/turret/weapon/bow/bow.tres" id="11_b3bbe"]
[ext_resource type="Resource" uid="uid://c374q5ow0jst7" path="res://game/turret/weapon/shotgun/shotgun.tres" id="12_nb84h"]
[ext_resource type="PackedScene" uid="uid://byyojnp7a05uj" path="res://game/turret/turret.tscn" id="21_0qv2g"]

[sub_resource type="ShaderMaterial" id="2"]
shader = ExtResource("3_5rhxv")
shader_parameter/outline_color = Plane(0.29, 0.21, 0.3, 1)

[sub_resource type="Curve2D" id="1"]
_data = {
"points": PackedVector2Array(-118.921, -120.11, 118.921, 120.11, 139, 182, -112, 68, 112, -68, 316, 96, -25, -32.5, 25, 32.5, 494, 127, 34, -50, -34, 50, 551, 284, -263, 21, 263, -21, 317, 240, 77, 89.5, -77, -89.5, 89, 292)
}
point_count = 6

[node name="Game" type="Node"]

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="MarginContainer" type="MarginContainer" parent="CanvasLayer"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
theme = ExtResource("3")
metadata/_edit_lock_ = true

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/MarginContainer"]
layout_mode = 2
mouse_filter = 2

[node name="Button" type="Button" parent="CanvasLayer/MarginContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 0
focus_mode = 0
mouse_default_cursor_shape = 2
theme = ExtResource("3")
text = "BUILD"

[node name="RichTextLabel" type="RichTextLabel" parent="CanvasLayer/MarginContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme = ExtResource("3")
bbcode_enabled = true
text = "asdfasdfjhasdhfasdfjxcoivjoivjasdoifjasdoifjaoij"
fit_content_height = true

[node name="ItemDetails" type="Control" parent="CanvasLayer/MarginContainer"]
layout_mode = 2
mouse_filter = 2

[node name="VBoxContainer" type="VBoxContainer" parent="CanvasLayer/MarginContainer"]
layout_mode = 2
mouse_filter = 2

[node name="TurretSelection" type="Control" parent="CanvasLayer" groups=["turret_selection"]]
layout_mode = 3
anchors_preset = 0
size_flags_horizontal = 0
size_flags_vertical = 0
mouse_filter = 2
script = ExtResource("2_6iqjx")

[node name="TargetIndicator" type="TextureRect" parent="CanvasLayer/TurretSelection"]
material = SubResource("2")
layout_mode = 0
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
size_flags_horizontal = 0
size_flags_vertical = 0
mouse_filter = 2
texture = ExtResource("10")
script = ExtResource("5_svi0v")

[node name="Camera2D" type="Camera2D" parent="."]
anchor_mode = 0

[node name="Map" type="Node2D" parent="."]
script = ExtResource("6_q555l")
enemy_scene = ExtResource("7_1d3fw")

[node name="HostilePaths" type="Node2D" parent="Map"]

[node name="HostilePath" type="Path2D" parent="Map/HostilePaths"]
curve = SubResource("1")

[node name="PathFollow2D" type="PathFollow2D" parent="Map/HostilePaths/HostilePath"]
position = Vector2(139, 182)
rotation = 0.790372

[node name="Stones" type="Node2D" parent="Map" groups=["stones"]]

[node name="GenerationTimer" parent="Map" instance=ExtResource("5")]
wait_time = 0.1
autostart = true

[node name="Area2D" type="Area2D" parent="Map"]
collision_layer = 2
collision_mask = 0

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Map/Area2D"]
polygon = PackedVector2Array(88, 263, 177, 295, 251, 294, 217, 270, 233, 241, 311, 225, 415, 230, 422, 259, 386, 287, 483, 289, 543, 266, 538, 224, 467, 122, 418, 82, 342, 111, 280, 170, 247, 221, 216, 244, 172, 239, 108, 180, 139, 162, 200, 209, 212, 206, 258, 114, 334, 64, 397, 49, 457, 60, 531, 134, 584, 242, 567, 287, 515, 317, 374, 310, 340, 305, 269, 322, 193, 335, 124, 331, 71, 309)

[node name="TileMap" type="TileMap" parent="Map"]
tile_set = ExtResource("8_i48p8")
format = 2
layer_0/tile_data = PackedInt32Array(524310, 1, 5, 589846, 1, 6, 589847, 1, 4, 655383, 1, 3, 655384, 1, 1, 720920, 1, 5, 720921, 1, 2, 720922, 1, 4, 720923, 1, 2, 655387, 1, 0, 589850, 1, 5, 589849, 1, 0, 589848, 1, 5, 786458, 1, 1, 786459, 1, 2, 786460, 1, 2, 720924, 1, 1, 655386, 1, 2, 786457, 1, 1, 851995, 1, 1, 851996, 1, 2, 851997, 1, 1, 851998, 1, 3, 786462, 1, 3, 786461, 1, 6, 720925, 1, 2, 720919, 1, 5, 786456, 1, 0, 851993, 1, 6, 851994, 1, 3, 917532, 1, 3, 917533, 1, 6, 1048603, 1, 4, 983067, 1, 3, 1048604, 1, 0, 1048605, 1, 3, 1048606, 1, 0, 983070, 1, 5, 917534, 1, 6, 983069, 1, 4, 1048607, 1, 4, 983071, 1, 6, 917535, 1, 0, 983068, 1, 4, 983072, 1, 0, 1048608, 1, 0, 917536, 1, 2, 851999, 1, 0, 655388, 1, 0, 589852, 1, 3, 589851, 1, 2, 655389, 1, 4, 720926, 1, 1, 524313, 1, 0, 524312, 1, 3, 458776, 1, 3, 458775, 1, 2, 524311, 1, 4, 786449, 1, 6, 786450, 1, 1, 786451, 1, 4, 786452, 1, 1, 720916, 1, 5, 720917, 1, 4, 720918, 1, 0, 851987, 1, 0, 851988, 1, 0, 851989, 1, 2, 786453, 1, 6, 786454, 1, 2, 786455, 1, 5, 851991, 1, 0, 851990, 1, 4, 851986, 1, 6, 851992, 1, 4, 917530, 1, 0, 917531, 1, 4, 655381, 1, 4, 655382, 1, 1, 655380, 1, 4, 720915, 1, 1, 589845, 1, 5, 589844, 1, 0, 655379, 1, 1, 720914, 1, 3, 720913, 65537, 3, 655378, 65537, 4, 589843, 65537, 3, 524308, 65537, 1, 524309, 1, 4, 458773, 65537, 1, 458774, 1, 0, 393239, 1, 4, 393240, 1, 3, 458777, 1, 6, 458778, 1, 1, 524314, 1, 2, 524315, 1, 2, 655385, 1, 1, 458779, 65537, 131073, 524316, 65537, 131075, 589853, 65537, 131072, 655390, 65537, 131077, 786463, 65537, 131072, 852000, 65537, 131074, 393241, 65537, 131072, 393238, 65537, 2, 786448, 65537, 4, 851984, 1, 1, 851985, 1, 2, 1114138, 1, 6, 1114139, 1, 1, 1114140, 1, 0, 1114141, 1, 3, 1114142, 1, 0, 720908, 1, 4, 655372, 1, 4, 589836, 1, 2, 524300, 1, 2, 458764, 1, 3, 458765, 1, 2, 393229, 1, 1, 393230, 1, 3, 327694, 1, 4, 327695, 1, 4, 262159, 1, 2, 327696, 1, 2, 262160, 1, 3, 262161, 1, 0, 196625, 1, 0, 196626, 1, 5, 131090, 1, 4, 131091, 1, 5, 131092, 1, 6, 65556, 1, 0, 65557, 1, 1, 65558, 1, 6, 196624, 1, 6, 524301, 1, 0, 458766, 1, 5, 393231, 1, 4, 393232, 1, 4, 327697, 1, 3, 262162, 1, 1, 196627, 1, 4, 131093, 1, 3, 131094, 1, 1, 131084, 1, 6, 131083, 1, 5, 131082, 1, 6, 131081, 1, 1, 131080, 1, 6, 131079, 1, 2, 196614, 1, 6, 196613, 1, 5, 262149, 1, 4, 262148, 1, 5, 327684, 1, 2, 393219, 1, 5, 458755, 1, 2, 393220, 1, 3, 393221, 1, 5, 327686, 1, 2, 327687, 1, 5, 262152, 1, 1, 262153, 1, 4, 262154, 1, 3, 196618, 1, 3, 196619, 1, 2, 196617, 1, 5, 262151, 1, 5, 458756, 1, 0, 458757, 1, 1, 458758, 1, 4, 393223, 1, 3, 393224, 1, 2, 327689, 1, 5, 327690, 1, 2, 262155, 1, 5, 196620, 1, 1, 196621, 1, 1, 131085, 1, 0, 327688, 1, 3, 458759, 1, 1, 458760, 1, 5, 393225, 1, 6, 393226, 1, 2, 327691, 1, 0, 327692, 1, 5, 262157, 1, 5, 262158, 1, 1, 131089, 1, 6, 131088, 1, 2, 131087, 1, 4, 131086, 1, 1, 196616, 1, 6, 196615, 1, 3, 262147, 1, 5, 327682, 1, 4, 327683, 1, 6, 327685, 1, 1, 262156, 1, 6, 196622, 1, 1, 196623, 1, 4, 393222, 1, 0, 1048587, 1, 3, 1048586, 1, 4, 983049, 1, 4, 983048, 1, 4, 917511, 1, 3, 917510, 1, 6, 851973, 1, 0, 851972, 1, 1, 786436, 1, 6, 786435, 1, 4, 720899, 1, 4, 131100, 1, 6, 131101, 1, 0, 196637, 1, 3, 196638, 1, 0, 196639, 1, 5, 196640, 1, 6, 262176, 1, 3, 262177, 1, 4, 262178, 1, 6, 327715, 1, 4, 327716, 1, 0, 393252, 1, 6, 393253, 1, 2, 458789, 1, 1, 458790, 1, 6, 524326, 1, 5, 589862, 1, 3, 524325, 1, 2, 524324, 1, 3, 458788, 1, 4, 458787, 1, 5, 393251, 1, 2, 393250, 1, 0, 327714, 1, 5, 327713, 1, 2, 458786, 1, 3, 589861, 1, 0, 655397, 1, 2, 655398, 1, 2, 720934, 1, 6, 524323, 1, 1, 589860, 1, 0, 720933, 1, 3, 786470, 1, 1, 655396, 1, 5, 720932, 1, 2, 786469, 1, 3, 852006, 1, 3, 917542, 1, 0, 983078, 1, 4, 1048614, 1, 1, 1114150, 1, 5)

[node name="Turrets" type="Node2D" parent="." groups=["turrets"]]

[node name="Turret" parent="Turrets" instance=ExtResource("21_0qv2g")]
position = Vector2(287, 179)
weapon = ExtResource("10_c40m7")

[node name="Turret2" parent="Turrets" instance=ExtResource("21_0qv2g")]
position = Vector2(323, 147)

[node name="Turret3" parent="Turrets" instance=ExtResource("21_0qv2g")]
position = Vector2(235, 101)
weapon = ExtResource("11_b3bbe")

[node name="Turret4" parent="Turrets" instance=ExtResource("21_0qv2g")]
position = Vector2(213, 170)
weapon = ExtResource("12_nb84h")

[node name="CursorFollower" type="Node2D" parent="."]
script = ExtResource("7")

[node name="Builder" type="Node2D" parent="CursorFollower"]
script = ExtResource("6")
turret = ExtResource("21_0qv2g")

[connection signal="pressed" from="CanvasLayer/MarginContainer/HBoxContainer/Button" to="CursorFollower/Builder" method="start_build"]
[connection signal="timeout" from="Map/GenerationTimer" to="Map" method="generate"]
